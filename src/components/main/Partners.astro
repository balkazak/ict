---
import { Image } from "astro:assets";
import "swiper/css";
import "swiper/css/autoplay";

import logo1 from "@/assets/partners/AB-InBev.svg";
import logo2 from "@/assets/partners/Abbott.svg";
import logo3 from "@/assets/partners/Bayreuth.svg";
import logo4 from "@/assets/partners/Harvard_University.svg";
import logo5 from "@/assets/partners-1/Ikea.svg";
import logo6 from "@/assets/partners/Komatsu.svg";
import logo7 from "@/assets/partners/Northern_Arizona_Athletics.svg";
import logo8 from "@/assets/partners/Unilever.svg";
import logo9 from "@/assets/partners/the-university-of-sydney.svg";

const images = [logo1, logo2, logo3, logo4, logo5, logo6, logo7, logo8, logo9];
---

<section class="relative min-h-[60vh] overflow-hidden bg-[#E6F7F7] py-20">
  <!-- Organic pattern overlay -->
  <div class="absolute inset-0 opacity-10">
    <div class="organic-pattern"></div>
  </div>

  <!-- Flowing water effect -->
  <div class="absolute inset-0 overflow-hidden">
    {Array.from({ length: 15 }).map(() => (
      <div
        class="water-flow absolute"
        style={{
          left: `${Math.random() * 100}%`,
          width: `${Math.random() * 100 + 50}px`,
          height: `${Math.random() * 2 + 1}px`,
          animationDelay: `${Math.random() * 5}s`,
          animationDuration: `${Math.random() * 5 + 5}s`
        }}
      ></div>
    ))}
  </div>

  <div class="relative z-10 container mx-auto max-w-6xl px-4">
    <!-- Section header -->
    <div class="mb-16 text-center">
      <div class="eco-badge-large mx-auto mb-6" data-aos="zoom-in">
        <div class="eco-badge-large-glow"></div>
        <span class="relative z-10 text-2xl font-bold text-[#0A7B76]">Наши Партнеры</span>
      </div>
      <p
        data-aos="fade-up"
        class="eco-text mx-auto mt-4 max-w-2xl text-[#0A7B76]/80"
      >
        Мы объединяем усилия с ведущими организациями для создания передовых  решений
        будущего в области устойчивого развития
      </p>
    </div>

    <!-- Partners slider -->
    <div class="eco-frame relative mx-auto">
      <div class="eco-scanner-horizontal"></div>
      <div class="eco-corner-tl"></div>
      <div class="eco-corner-br"></div>
      
      <div class="swiper partners-swiper">
        <div class="swiper-wrapper">
          {images.map((partner, index) => (
            <div class="swiper-slide">
              <div class="eco-partner-card group">
                <div class="eco-partner-glow"></div>
                <Image
                  data-aos="fade-up"
                  data-aos-delay={index * 100}
                  src={partner}
                  alt={`Partner ${index + 1}`}
                  class="partner-logo relative z-10 mx-auto h-24 object-contain transition-all duration-300 group-hover:scale-110"
                />
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .organic-pattern {
    background-image: radial-gradient(
      circle at center,
      rgba(10, 123, 118, 0.1) 2px,
      transparent 2px
    );
    background-size: 30px 30px;
    width: 100%;
    height: 100%;
    animation: patternPulse 4s ease-in-out infinite;
  }

  .water-flow {
    background: linear-gradient(
      90deg,
      transparent,
      rgba(10, 123, 118, 0.3),
      transparent
    );
    animation: waterFlow linear infinite;
    border-radius: 100%;
  }

  .eco-frame {
    position: relative;
    border: 1px solid rgba(10, 123, 118, 0.2);
    border-radius: 8px;
    padding: 2rem;
    background: rgba(255, 255, 255, 0.5);
    backdrop-filter: blur(5px);
  }

  .eco-scanner-horizontal {
    position: absolute;
    height: 2px;
    width: 100%;
    left: 0;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(10, 123, 118, 0.5),
      transparent
    );
    filter: blur(1px);
    animation: scanHorizontal 4s ease-in-out infinite;
  }

  .eco-corner-tl,
  .eco-corner-br {
    position: absolute;
    width: 30px;
    height: 30px;
    border: 2px solid rgba(10, 123, 118, 0.4);
  }

  .eco-corner-tl {
    top: -1px;
    left: -1px;
    border-right: 0;
    border-bottom: 0;
  }

  .eco-corner-br {
    bottom: -1px;
    right: -1px;
    border-left: 0;
    border-top: 0;
  }

  .eco-partner-card {
    position: relative;
    padding: 2rem;
    background: rgba(255, 255, 255, 0.7);
    border-radius: 4px;
    overflow: hidden;
    transition: all 0.3s ease;
  }

  .eco-partner-card:hover {
    background: rgba(255, 255, 255, 0.9);
    box-shadow: 
      0 0 20px rgba(10, 123, 118, 0.1),
      0 0 40px rgba(10, 123, 118, 0.05);
  }

  .eco-partner-glow {
    position: absolute;
    inset: 0;
    background: radial-gradient(
      circle at 50% 50%,
      rgba(10, 123, 118, 0.1),
      transparent 70%
    );
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .eco-partner-card:hover .eco-partner-glow {
    opacity: 1;
  }

  .partner-logo {
    filter: brightness(0) saturate(100%) invert(30%) sepia(96%) saturate(1352%) hue-rotate(155deg) brightness(91%) contrast(101%);
    opacity: 0.7;
    transition: all 0.3s ease;
  }

  .eco-partner-card:hover .partner-logo {
    opacity: 1;
    filter: brightness(0) saturate(100%) invert(30%) sepia(96%) saturate(1352%) hue-rotate(155deg) brightness(91%) contrast(101%);
  }

  .eco-badge-large {
    position: relative;
    width: fit-content;
    padding: 1rem 3rem;
    background: rgba(255, 255, 255, 0.5);
    border: 1px solid rgba(10, 123, 118, 0.2);
    border-radius: 4px;
    overflow: hidden;
    backdrop-filter: blur(5px);
  }

  .eco-badge-large-glow {
    position: absolute;
    inset: 0;
    background: radial-gradient(
      circle at 50% 50%,
      rgba(10, 123, 118, 0.2),
      transparent 70%
    );
    animation: pulseGlow 4s ease-in-out infinite;
  }

  @keyframes patternPulse {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.6; }
  }

  @keyframes waterFlow {
    0% { transform: translateY(-100%) translateX(-20px); opacity: 0; }
    50% { opacity: 0.7; }
    100% { transform: translateY(100vh) translateX(20px); opacity: 0; }
  }

  @keyframes scanHorizontal {
    0%, 100% { left: 0; opacity: 0; }
    50% { left: 100%; opacity: 1; }
  }

  @keyframes pulseGlow {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.7; }
  }
</style>

<script>
  import Swiper from "swiper";
  import { Autoplay } from "swiper/modules";

  document.addEventListener("DOMContentLoaded", () => {
    const swiper = new Swiper(".partners-swiper", {
      modules: [Autoplay],
      slidesPerView: 1,
      spaceBetween: 30,
      loop: true,
      autoplay: {
        delay: 3000,
        disableOnInteraction: false,
        pauseOnMouseEnter: true,
      },
      breakpoints: {
        640: {
          slidesPerView: 2,
          spaceBetween: 20,
        },
        768: {
          slidesPerView: 3,
          spaceBetween: 30,
        },
        1024: {
          slidesPerView: 4,
          spaceBetween: 40,
        },
      },
    });
  });
</script>
