---
import "swiper/css";
import "swiper/css/pagination";
import { Image } from "astro:assets";
import PeterCull from "@/assets/experts/Peter-Cull.webp";
import RicardoCarassco from "@/assets/experts/Ricardo-Carassco.jpg";
import TalgatKerteshev from "@/assets/experts/Talgat-Kerteshev.webp";

const experts = [
  {
    name: "Доктор Питер Кол (Peter Cull)",
    position: "Основатель и генеральный директор ICT International",
    bio: "Австралийский ученый и предприниматель, известный своими инновациями в области экологического мониторинга и управления водными ресурсами. Он является основателем и генеральным директором компании ICT International, специализирующейся на разработке и производстве высокоточных приборов для измерения параметров почвы, растений и окружающей среды.",
    image: PeterCull,
  },
  {
    name: "Рикардо Карраско",
    position: "Эксперт по устойчивому развитию",
    bio: "Признанный эксперт в сфере устойчивого развития, климатической политики и углеродных проектов. Обладая многолетним опытом работы в этой области, он внес значительный вклад в разработку и реализацию стратегий по снижению выбросов парниковых газов, адаптации к изменениям климата и развитию углеродных рынков.",
    image: RicardoCarassco,
  },
  {
    name: "Талгат Сеитович Кертешев",
    position: "Декан факультета «Водные, земельные и лесные ресурсы» КазНАИУ",
    bio: "Кандидат сельскохозяйственных наук, известный своей деятельностью в области сохранения биоразнообразия и управления экосистемами. Внес значительный вклад в создание нескольких особо охраняемых природных территорий Казахстана. Активно участвует в развитии углеродных проектов в Казахстане.",
    image: TalgatKerteshev,
  },
];
---

<section class="relative min-h-screen overflow-hidden bg-[#E6F7F7] py-24">
  <!-- Organic pattern background -->
  <div class="absolute inset-0 opacity-10">
    <div class="organic-pattern"></div>
  </div>

  <!-- Floating leaves -->
  <div class="absolute inset-0 overflow-hidden">
    {Array.from({ length: 15 }).map(() => (
      <div
        class="floating-leaf absolute"
        style={{
          left: `${Math.random() * 100}%`,
          top: `${Math.random() * 100}%`,
          transform: `rotate(${Math.random() * 360}deg) scale(${Math.random() * 0.5 + 0.5})`,
          animationDelay: `${Math.random() * 10}s`,
          animationDuration: `${Math.random() * 15 + 10}s`
        }}
      ></div>
    ))}
  </div>

  <div class="relative z-10 container mx-auto px-4">
    <div class="text-center mb-16">
      <div class="eco-badge inline-flex flex-col items-center">
        <span class="text-[#0A7B76] font-bold tracking-[0.5em]">ЭКСПЕРТЫ</span>
        <h2 class="mt-6 text-4xl font-bold text-[#0A5B56] eco-heading">Наши специалисты</h2>
      </div>
    </div>

    <div class="experts-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto">
      {experts.map((expert, index) => (
        <div 
          class="eco-expert-card group"
          data-aos="zoom-in"
          data-aos-delay={index * 200}
        >
          <div class="eco-expert-card__inner">
            <!-- Front -->
            <div class="eco-expert-card__front">
              <div class="eco-expert-card__image-container">
                <div class="eco-expert-card__corners">
                  <span></span><span></span><span></span><span></span>
                </div>
                <Image 
                  src={expert.image} 
                  alt={expert.name}
                  class="eco-expert-card__image"
                  width={400}
                  height={400}
                />
                <div class="eco-expert-card__scan"></div>
              </div>
              <div class="eco-expert-card__content p-6">
                <h3 class="text-xl font-bold text-[#0A7B76] mb-2">{expert.name}</h3>
                <p class="text-[#0A7B76]/80 text-sm">{expert.position}</p>
                <div class="eco-expert-card__hover-hint mt-4">
                  <span class="text-xs text-[#0A7B76]/60">Нажмите для подробностей</span>
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                  </svg>
                </div>
              </div>
            </div>
            
            <!-- Back -->
            <div class="eco-expert-card__back">
              <div class="eco-expert-card__corners">
                <span></span><span></span><span></span><span></span>
              </div>
              <div class="p-6">
                <h3 class="text-xl font-bold text-[#0A7B76] mb-4">{expert.name}</h3>
                <p class="text-[#0A7B76]/90 text-sm leading-relaxed">{expert.bio}</p>
                <div class="eco-expert-card__hover-hint mt-4">
                  <span class="text-xs text-[#0A7B76]/60">Вернуться</span>
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
                  </svg>
                </div>
              </div>
              <div class="eco-expert-card__decoration"></div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .organic-pattern {
    background-image: radial-gradient(
      circle at center,
      rgba(10, 123, 118, 0.1) 2px,
      transparent 2px
    );
    background-size: 30px 30px;
    width: 100%;
    height: 100%;
    animation: patternPulse 4s ease-in-out infinite;
  }

  .floating-leaf {
    width: 30px;
    height: 30px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%230A7B76'%3E%3Cpath d='M17,8C8,10,5.9,16.17,3.82,21.34L5.71,22l1-2.3A4.49,4.49,0,0,0,8,20a4,4,0,0,0,4-4,4,4,0,0,0-4-4,4.5,4.5,0,0,0-1.08.14L5.82,10,5,8.76C9.77,5.19,16.2,6.72,17,8ZM8,14a2,2,0,1,1-2,2A2,2,0,0,1,8,14Z'/%3E%3C/svg%3E");
    background-size: contain;
    opacity: 0.2;
    animation: floatLeaf 20s linear infinite;
  }

  .eco-badge {
    position: relative;
    padding: 0.5rem 1.5rem;
    background: rgba(255, 255, 255, 0.5);
    border: 1px solid rgba(10, 123, 118, 0.3);
    border-radius: 4px;
    overflow: hidden;
    backdrop-filter: blur(5px);
  }

  .eco-heading {
    background: linear-gradient(90deg, #0A5B56, #0A7B76, #0A5B56);
    background-size: 200% auto;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: textFlow 8s linear infinite;
  }

  .eco-expert-card {
    perspective: 1000px;
    height: 450px;
  }

  .eco-expert-card__inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.8s;
    transform-style: preserve-3d;
  }

  .eco-expert-card:hover .eco-expert-card__inner {
    transform: rotateY(180deg);
  }

  .eco-expert-card__front, 
  .eco-expert-card__back {
    position: absolute;
    width: 100%;
    height: 100%;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    border-radius: 8px;
    overflow: hidden;
    background: rgba(255, 255, 255, 0.7);
    border: 1px solid rgba(10, 123, 118, 0.2);
    backdrop-filter: blur(5px);
  }

  .eco-expert-card__back {
    transform: rotateY(180deg);
    background: rgba(255, 255, 255, 0.8);
  }

  .eco-expert-card__image-container {
    position: relative;
    height: 250px;
    overflow: hidden;
  }

  .eco-expert-card__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }

  .eco-expert-card:hover .eco-expert-card__image {
    transform: scale(1.05);
  }

  .eco-expert-card__scan {
    position: absolute;
    width: 100%;
    height: 2px;
    background: rgba(10, 123, 118, 0.5);
    filter: blur(1px);
    animation: scan 4s ease-in-out infinite;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .eco-expert-card:hover .eco-expert-card__scan {
    opacity: 1;
  }

  .eco-expert-card__corners {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 2;
  }

  .eco-expert-card__corners span {
    position: absolute;
    width: 20px;
    height: 20px;
    border: 2px solid rgba(10, 123, 118, 0.5);
  }

  .eco-expert-card__corners span:nth-child(1) { top: 0; left: 0; border-right: 0; border-bottom: 0; }
  .eco-expert-card__corners span:nth-child(2) { top: 0; right: 0; border-left: 0; border-bottom: 0; }
  .eco-expert-card__corners span:nth-child(3) { bottom: 0; left: 0; border-right: 0; border-top: 0; }
  .eco-expert-card__corners span:nth-child(4) { bottom: 0; right: 0; border-left: 0; border-top: 0; }

  .eco-expert-card__hover-hint {
    position: absolute;
    bottom: 1rem;
    left: 0;
    right: 0;
    text-align: center;
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.3s ease;
  }

  .eco-expert-card:hover .eco-expert-card__hover-hint {
    opacity: 1;
    transform: translateY(0);
  }

  .eco-expert-card__decoration {
    position: absolute;
    inset: 0;
    background: 
      radial-gradient(
        circle at 50% 0%,
        rgba(10, 123, 118, 0.1),
        transparent 70%
      );
    pointer-events: none;
  }

  @keyframes patternPulse {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.6; }
  }

  @keyframes floatLeaf {
    0% { transform: translate(0, 0) rotate(0deg); opacity: 0.2; }
    25% { transform: translate(20px, 20px) rotate(90deg); opacity: 0.3; }
    50% { transform: translate(40px, 0px) rotate(180deg); opacity: 0.2; }
    75% { transform: translate(20px, -20px) rotate(270deg); opacity: 0.1; }
    100% { transform: translate(0, 0) rotate(360deg); opacity: 0.2; }
  }

  @keyframes scan {
    0% { top: 0; }
    50% { top: 100%; }
    100% { top: 0; }
  }

  @keyframes textFlow {
    0% { background-position: 0% 50%; }
    100% { background-position: 200% 50%; }
  }
</style>
